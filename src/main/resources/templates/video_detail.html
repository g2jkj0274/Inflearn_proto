<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Video Detail</title>
    <!-- CSS for TOAST UI Editor -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/codemirror.css" />
    <link rel="stylesheet" href="https://uicdn.toast.com/tui-editor/latest/tui-editor.css" />
    <link rel="stylesheet" href="https://uicdn.toast.com/tui-editor/latest/tui-editor-contents.css" />
</head>
<body>

<h1 th:text="${video.title}"></h1>
<a th:href="${video.videoUrl}" th:text="${video.videoUrl}"></a>

<!-- 기능 버튼 -->
<div>
    <button>커리큘럼</button>
    <button>커뮤니티(QnA)</button>
    <button>노트</button>
</div>

<h4>Curriculum Videos</h4>
<ul>
    <li th:each="curriculumVideo : ${video.lecture.lectureVideoList}">
        <a th:href="@{/lectures/{lectureId}/videos/{videoId}(lectureId=${video.lecture.lectureId}, videoId=${curriculumVideo.lectureVideoId})}" th:text="${curriculumVideo.title}"></a>
    </li>
</ul>

<!-- TOAST UI Editor container -->
<div id="toast-editor"></div>

<!-- Save Note Button -->
<button id="save-note">노트입력</button>

<!-- List of saved notes -->
<ul id="notes-list"></ul>

<!-- JS Dependencies for TOAST UI Editor -->
<script src="https://uicdn.toast.com/tui-editor/latest/tui-editor-Editor-full.js"></script>
<script>
    const editor = new tui.Editor({
        el: document.querySelector('#toast-editor'),
        initialEditType: 'markdown',
        previewStyle: 'vertical',
        height: '400px'
    });

    // Store saved notes in an array
    const savedNotes = [];

    document.querySelector("#save-note").addEventListener("click", function() {
        // Get content from the editor
        const noteContent = editor.getMarkdown();

        // Add content to the saved notes array
        savedNotes.push(noteContent);

        // Update the notes list
        const notesList = document.querySelector("#notes-list");
        notesList.innerHTML = ""; // Clear the existing list
        savedNotes.forEach(note => {
            const listItem = document.createElement("li");
            listItem.textContent = note;
            notesList.appendChild(listItem);
        });
    });
</script>
</body>
</html>
